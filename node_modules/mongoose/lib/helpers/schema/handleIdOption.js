'use strict';

const addAutoId = require('./addAutoId');

module.exports = function handleIdOption(schema, options) {
<<<<<<< HEAD
  if (options == null || options._id == null) {
=======
  if (options?._id == null) {
>>>>>>> 51e1f831f5ec4fb695d9c9fad5e573005cd428c5
    return schema;
  }

  schema = schema.clone();
  if (!options._id) {
    schema.remove('_id');
    schema.options._id = false;
  } else if (!schema.paths['_id']) {
    addAutoId(schema);
    schema.options._id = true;
  }

  return schema;
};
